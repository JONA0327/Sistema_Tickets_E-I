document.addEventListener("DOMContentLoaded",()=>{const a=document.querySelector("[data-my-tickets]");if(!a)return;const e=document.getElementById("cancelModal"),s=document.getElementById("cancelModalMessage"),i=document.getElementById("cancelModalClose"),l=document.getElementById("cancelModalConfirm");if(!e||!s||!i||!l)return;const r=()=>{e.classList.remove("hidden"),e.classList.add("flex"),document.body.classList.add("overflow-hidden")},d=()=>{e.classList.add("hidden"),e.classList.remove("flex"),document.body.classList.remove("overflow-hidden"),e.removeAttribute("data-ticket-id")};a.querySelectorAll("[data-cancel-ticket]").forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.ticketId,c=t.dataset.ticketFolio;!n||!c||(s.textContent=`¿Estás seguro de que quieres cancelar el ticket ${c}? Esta acción no se puede deshacer.`,e.setAttribute("data-ticket-id",n),r())})});const m=()=>{const t=e.getAttribute("data-ticket-id");if(!t)return;const n=document.createElement("form");n.method="POST",n.action=`/ticket/${t}`;const c=document.createElement("input");c.type="hidden",c.name="_token",c.value=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"";const o=document.createElement("input");o.type="hidden",o.name="_method",o.value="DELETE",n.appendChild(c),n.appendChild(o),document.body.appendChild(n),n.submit()};i.addEventListener("click",d),l.addEventListener("click",()=>{m(),d()}),e.addEventListener("click",t=>{t.target===e&&d()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&d()})});
